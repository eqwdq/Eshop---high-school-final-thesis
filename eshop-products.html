<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produkty</title>

    <!-- fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Lobster&family=Rubik:ital,wght@1,300&display=swap" rel="stylesheet">

	<!-- bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="test1.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container">
          <a class="navbar-brand">Moje Potraviny</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarScroll">
            <ul class="navbar-nav me-auto my-2 my-lg-0">
              <li class="nav-item">
                <a class="nav-link active" href="#">Domov</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="eshop-products.html">Produkty</a>
              </li>
              <li class="nav-item">
                <a class="nav-link " href="#">Obchod</a>
              </li>
              <li class="nav-item">
                <a class="nav-link " href="#">kontakt</a>
              </li>
            </ul>
            <form class="d-flex ">
              <input class="px-2 search" type="search" placeholder="Search" aria-label="Search">
              <button class="btn" type="submit">Hladať</button>
            </form>
          </div>
        </div>
    </nav>
    <section class="shop">
        <div>
             <div class="row py-5">
                <div class="col-lg-8 m-auto text-center">
                    <h1>Produkty</h1>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-sm-6 col-xl-2 col-md-4 col-lg-3">
                    <div class="card shadow-sm bg-light mb-2">
                        <img src="" class="img-fluid shop-item-image" id="productImg" alt="">
                        <div class="card-body text-center">
                            <h6 class="shop-item-title" id="shop-item-title"></h6>
                            <p class="card-text" id="card-text"></p>
                            <div>
                                <small class="text-muted float-start">Skladom 5+ ks</small>
                                <i class="bi bi-star-fill float-end"></i>
                                <i class="bi bi-star-fill float-end"></i>
                                <i class="bi bi-star-fill float-end"></i>
                                <i class="bi bi-star-fill float-end"></i>
                                <small class="text-muted float-end" id="rating"></small>
                            </div>
                        </div>
                        <div class="card-footer shop-item-details">
                            <p class="float-start top shop-item-price" id="shop-item-price"></p>
                            <button class="btn btn-outline-dark float-end shop-item-button">Do košíka</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!----------------------------expanding shopping cart with offcanvas--------------------------->
    <div class="text-center">
        <button class="btn btn-primary defaultButton col-1 position-relative" type="button" data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasCart" aria-controls="offcanvasScrolling">
        Košík
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="badge">20</span>
        </button>
    </div>

<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasCart" aria-labelledby="offcanvasCartLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasCartLabel">Nákupný Košík</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <div class="cart-items">

            <!-- ukazka kody ktora by tu mala byt -->
            <!-- <div class="col cart-row">
                <div class="card shadow-sm bg-light mb-2">
                    <img src="http://localhost:8080/KOP/images/luca-zanon-26595-unsplash.jpg" class="img-fluid" alt="">
                    <div class="card-body text-center">
                        <h6 class="cart-item-title">Produkt 8</h6>
                    </div>
                    <div class="card-footer">
                        <p class="float-start cart-price">69.99€</p>
                        <button class="btn btn-outline-danger btn-sm float-end">Vymazať</button>
                        <input type="number" value="6" class="float-end cart-quantity-input">
                    </div>
                </div>
            </div> -->


        </div>
    </div>
    <div class="offcanvas-footer">
        <div class="cart-total">
            <strong class="cart-total-title">Total</strong>
            <span class="cart-total-price">0€</span>
            <button class="btn btn-outline-primary btn-md float-end btn-purchase">Kúpiť</button>
        </div>
    </div>
</div>
<!--------------------------------------end of offcanvas--------------------------------------------->

<!---------------------------------------- off canvas sign in ---------------------------------------------------------------------------->
<button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSignIn" aria-controls="offcanvasSignIn">Prihlásiť sa</button>

<div class="offcanvas offcanvas-top" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasSignIn" aria-labelledby="offcanvasSignInLabel">
<div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvaSignInLabel">Prihlásenie/Registrácia</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
</div>
<div class="offcanvas-body">
    <!------------------------------ sign in  ------------------------>
    <div class="text-center" id="main-div">
        <main class="form-signin">
            <form>
            <div class="form-floating">
                <input type="email" class="form-control" id="floatingInput" placeholder="name@example.com">
                <label for="floatingInput">Email address</label>
            </div>
            <div class="form-floating">
                <input type="password" class="form-control" id="floatingPassword" placeholder="Password">
                <label for="floatingPassword">Password</label>
            </div>
            <br>
            <button class="btn btn-lg btn-primary btn-lg" type="submit">Prihlasiť sa</button>
            <button class="btn btn-lg btn-primary btn-lg" type="submit">Registrovať sa</button>
            </form>
        </main>
    </div>
    <!---------------------------- end of sign in --------------------->
</div>
</div>
<!----------------------------- end of off canvas sign in ------------------->
    <footer>
        <div class="container">
            <div class="row">
                <div class="info-footer col-md-4">
                    <h2>Informácie</h2>
                    <ul class="menu-item">
                        <li >
                            <a href="#"> O nás</a>
                        </li>

                        <li>
                        <a href="#"> Kontakt
                        </a>
                        </li>

                        <li>
                        <a href="#"> Kontakt
                        </a>
                        </li>
                    </ul>
                </div>

                <div class="contact-footer col-md-4">
                    <h2>Kontakt</h2>
                    <ul class="menu-item">
                        <li>
                            <a href="tel:0902 100 564"> 0902 100 564 </a>
                        </li>
                        <li>
                            <a href="https://www.google.sk/maps/place/Hodin%C3%A1rstvo+Emili/@48.4263709,17.7977718,17z/data=!3m1!4b1!4m5!3m4!1s0x476b5a5597f2200b:0x961be76d1902eb2e!8m2!3d48.4263674!4d17.7999605" target="_blank"> Firma s.r.o
                        </a>
                        </li>
                        <li>
                            <a href="mailto::danielf0804@gmail.com"> email: danielf0804@gmail.com
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="contact-formular col-md-4">
                    <div class="mb-3">
                        <h2>Pošlite nám správu</h2>
                        <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="email@example.com">
                    </div>
                    <div class="mb-3">
                        <label for="exampleFormControlTextarea1" class="form-label">Text Správy</label>
                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
                    </div>
                    <button type="button" class="btn1">Odoslať</button>


                </div>
            </div>
        </div>
    </footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<script>
                /* divny kod nefuguje */
    // var cartBadge = document.getElementsByClassName('badge rounded-pill bg-danger');
    // cartBadge.innerText = itemNumber;

    // var itemNumber = 10;
    // var bruh = document.getElementById('badge').innerHTML;
    // bruh = 10;

                        /* koniec divneho kodu */

</script> -->

<script type="module">

    function addContentFromFirebase(itemName,price,rating,description) {

        var htmlName = document.getElementById('shop-item-title');
        var htmlPrice = document.getElementById('shop-item-price');
        var htmlRating = document.getElementById('rating');
        var htmlDescription = document.getElementById('card-text');

        htmlName.innerHTML= itemName;
        htmlPrice.innerHTML= price + ' €';
        htmlRating.innerHTML= rating;
        htmlDescription.innerHTML= description;

    }
    function addFromFirebase(Products) {
        Products.forEach(element => {
            addContentFromFirebase(element.name, element.price, element.rating, element.description);

        });
    }


    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js";
    import { getFirestore, doc, getDoc, getDocs, onSnapshot, collection } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-firestore.js";
    import { getStorage, ref as sRef, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.6.3/firebase-storage.js";

    // TODOs: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyCI5SdwdXMQeu3y7AQPZnkcZH_GmIcSgKw",
        authDomain: "login-9a8b6.firebaseapp.com",
        databaseURL: "https://login-9a8b6-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "login-9a8b6",
        storageBucket: "login-9a8b6.appspot.com",
        messagingSenderId: "663312681266",
        appId: "1:663312681266:web:aaff10c5e0a58994ceaf2b",
        measurementId: "G-XTC30ZEDBX"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore();


    function onloadWindow() {
        getFromFirebase();
        getImageFromFirestore();
    }

    async function getFromFirebase(){
        const dfRef = collection(db, "metadata");

        onSnapshot(dfRef,(querySnapshot) => {
            var items = [];

            querySnapshot.forEach(doc => {
                items.push(doc.data());
            });
            addFromFirebase(items);
        })
    }


    async function getImageFromFirestore(){
        // var name = imgname.value;

        var ref = doc(db, "ImageLinks/luca-zanon-26595-unsplash");
        const docSnap = await getDoc(ref);

        if(docSnap.exists()){
            productImg.src = docSnap.data().ImageURL;
        }
    }

    window.onload = onloadWindow;


</script>
<script src="main.js" async></script>
</body>
</html>